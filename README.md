# Configuraci칩n de la Agencia Web

Este proyecto utiliza **React** (Frontend), **Supabase** (Base de datos y Autenticaci칩n) y **Cloudinary** (Almacenamiento de im치genes).

## 1. Configuraci칩n de Supabase (SOLUCI칍N DE PERMISOS)

Para que la aplicaci칩n funcione correctamente (crear, editar, borrar), debes ejecutar este script en el **SQL Editor** de Supabase.

**Copia y pega TODO este bloque y ejec칰talo:**

```sql
-- 1. Crear la tabla si no existe
create table if not exists posts (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  summary text,
  content text not null,
  image_url text,
  slug text unique
);

-- 2. DESACTIVAR RLS (Seguridad a nivel de fila)
-- Al ser un admin 칰nico, esto evita bloqueos complejos de pol칤ticas
ALTER TABLE posts DISABLE ROW LEVEL SECURITY;

-- 3. OTORGAR PERMISOS (CR칈TICO)
-- Esto asegura que la API tenga permiso f칤sico de escribir y borrar en la tabla
GRANT ALL ON TABLE posts TO anon;
GRANT ALL ON TABLE posts TO authenticated;
GRANT ALL ON TABLE posts TO service_role;

-- 4. ARREGLAR CONTADOR DE IDs
-- Evita errores al crear nuevos posts si borraste los anteriores
GRANT USAGE, SELECT ON SEQUENCE posts_id_seq TO anon, authenticated, service_role;

-- 5. URLS AMIGABLES
-- Asegurar que existe la columna slug
ALTER TABLE posts ADD COLUMN IF NOT EXISTS slug text;
```

### Configurar Autenticaci칩n (Login)
1. Ve a **Authentication** -> **Providers**. Aseg칰rate de que **Email** est칠 habilitado.
2. Ve a **Authentication** -> **Users** y crea un nuevo usuario (este ser치 tu admin).

---

## 2. Configuraci칩n de Cloudinary

1. Ve a tu panel de Cloudinary -> **Settings** -> **Upload**.
2. En **Upload presets**, a침ade uno nuevo.
3. **IMPORTANTE:** En "Signing Mode", selecciona **Unsigned**.
4. En "Upload preset name", escribe: `blog_upload`.

---

## 3. C칩mo poner la aplicaci칩n en marcha (LOCAL)

Sigue estos pasos para trabajar en tu ordenador:

1.  **Instalar Node.js:** Aseg칰rate de tenerlo instalado.
2.  **Abrir Terminal:** Abre la carpeta del proyecto en tu terminal o VS Code.
3.  **Instalar Dependencias:**
    ```bash
    npm install
    ```
4.  **Iniciar Servidor:**
    ```bash
    npm run dev
    ```
5.  **Ver:** Abre `http://localhost:3000` en tu navegador.

---

## 4. C칩mo desplegar en GitHub Pages (GRATIS)

### Configuraci칩n Inicial (Solo una vez)

1.  **Crear Repositorio:** Crea un repo en GitHub y sube este c칩digo. Para despliegue gratuito, el repo debe ser **p칰blico**.

2.  **Configurar GitHub Pages:** Ve a Settings -> Pages, selecciona "Deploy from a branch" como source, luego elige la rama `gh-pages` y carpeta `/(root)`.

### Publicar Cambios (Cada vez que actualices)

Cada vez que hagas cambios en tu c칩digo y quieras publicarlos en GitHub Pages:

1.  **En la terminal del proyecto, ejecuta:**
    ```bash
    npm run deploy
    ```
    Este comando compila tu proyecto y lo sube autom치ticamente a GitHub Pages.

2.  **Espera 2-3 minutos** para que GitHub Pages procese los cambios.

3.  **Abre tu p치gina en el navegador:**
    - URL: https://ximosa.github.io/CMS-AISTUDIO/

4.  **Haz un hard refresh para ver los cambios:**
    - **Windows/Linux:** Presiona `Ctrl + F5` o `Ctrl + Shift + R`
    - **Mac:** Presiona `Cmd + Shift + R`
    - **Alternativa:** Abre en modo inc칩gnito (`Ctrl + Shift + N`)

> **游눠 Importante:** Si despu칠s del deploy ves la versi칩n antigua de tu p치gina, es porque tu navegador tiene la p치gina guardada en cach칠. Simplemente presiona `Ctrl + F5` en el navegador para recargar sin cach칠 y ver치s la versi칩n actualizada.

---

## 5. Scripts Adicionales

### Generar Sitemap

Para mejorar el SEO, la aplicaci칩n genera un `sitemap.xml` din치micamente. Debes ejecutar este script cada vez que a침adas, edites o elimines un post del blog para mantener el sitemap actualizado.

```bash
npm run sitemap
```

Este comando crear치 o actualizar치 el archivo `public/sitemap.xml`.

---

## 6. Configuraci칩n del Asistente de IA (Gemini)

Para que el asistente de IA en el panel de administraci칩n funcione, necesitas una clave de API de Google Gemini.

### A. Para Entorno Local

1.  **Crea un archivo `.env`:** En la ra칤z de tu proyecto, crea un archivo llamado `.env`.
2.  **A침ade tu clave de API:** Dentro del archivo `.env`, a침ade la siguiente l칤nea, reemplazando `TU_API_KEY_DE_GEMINI` con tu clave real:
    ```
    VITE_GEMINI_API_KEY=TU_API_KEY_DE_GEMINI
    ```
3.  **A침ade `.env` a `.gitignore`:** Para evitar subir tu clave secreta a GitHub, aseg칰rate de que tu archivo `.gitignore` contenga la l칤nea:
    ```
    .env
    ```

### B. Para GitHub (Despliegue)

1.  **Ve a tu repositorio en GitHub.**
2.  Haz clic en la pesta침a **Settings** (Configuraci칩n).
3.  En el men칰 de la izquierda, ve a **Secrets and variables** > **Actions**.
4.  Haz clic en el bot칩n **New repository secret**.
5.  **Nombre del secreto:** `VITE_GEMINI_API_KEY`
6.  **Valor del secreto:** Pega aqu칤 tu clave de API de Gemini.
7.  Haz clic en **Add secret**.
