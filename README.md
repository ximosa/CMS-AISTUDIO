# Configuración del Proyecto y Supabase

## 1. Configuración de Base de Datos (Tabla de Blog)

Entra a tu panel de control en Supabase, ve al **SQL Editor** y ejecuta este script para crear la tabla:

```sql
create table posts (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  summary text,
  content text not null,
  image_url text
);
```

## 2. Configuración de Seguridad (Autenticación)

Para que el login funcione y el admin esté protegido, debes activar la autenticación y configurar las políticas de seguridad (RLS).

### A. Habilitar Email/Password
1. En Supabase, ve a **Authentication** (icono de candado) -> **Providers**.
2. Asegúrate de que **Email** esté habilitado (Enable Email provider).

### B. Crear tu Usuario Administrador
1. Ve a **Authentication** -> **Users**.
2. Haz clic en **Add User** -> **Create New User**.
3. Ingresa tu email y contraseña (esta será la cuenta para entrar a `/admin`).
4. Confirma el email (si has desactivado "Confirm email" en proveedores) o simplemente usa el usuario creado.

### C. Proteger la Base de Datos (RLS)
Ahora que tenemos autenticación, vamos a proteger la tabla para que:
- **Cualquiera (anon)** pueda LEER los posts.
- **Solo usuarios autenticados** puedan CREAR, EDITAR o BORRAR posts.

Ve al **SQL Editor** y ejecuta este script:

```sql
-- 1. Habilitar RLS en la tabla
alter table posts enable row level security;

-- 2. Permitir lectura pública (cualquiera puede ver el blog)
create policy "Public posts are viewable by everyone"
on posts for select
to anon, authenticated
using ( true );

-- 3. Permitir todo (Insert/Update/Delete) SOLO a usuarios autenticados
create policy "Authenticated users can manage posts"
on posts for all
to authenticated
using ( true )
with check ( true );
```

## 3. Despliegue en Producción

1. Ejecuta `npm run build` para generar la carpeta de distribución.
2. Sube los archivos a tu hosting.
3. Asegúrate de configurar las variables de entorno en el hosting si decides no incluirlas directamente en el código en el futuro.
