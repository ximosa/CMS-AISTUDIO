# Configuración de la Agencia Web

Este proyecto utiliza **React** (Frontend), **Supabase** (Base de datos y Autenticación) y **Cloudinary** (Almacenamiento de imágenes).

## 1. Configuración de Supabase (SOLUCIÓN DE PERMISOS)

Para que la aplicación funcione correctamente (crear, editar, borrar), debes ejecutar este script en el **SQL Editor** de Supabase.

**Copia y pega TODO este bloque y ejecútalo:**

```sql
-- 1. Crear la tabla si no existe
create table if not exists posts (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  title text not null,
  summary text,
  content text not null,
  image_url text,
  slug text unique
);

-- 2. DESACTIVAR RLS (Seguridad a nivel de fila)
-- Al ser un admin único, esto evita bloqueos complejos de políticas
ALTER TABLE posts DISABLE ROW LEVEL SECURITY;

-- 3. OTORGAR PERMISOS (CRÍTICO)
-- Esto asegura que la API tenga permiso físico de escribir y borrar en la tabla
GRANT ALL ON TABLE posts TO anon;
GRANT ALL ON TABLE posts TO authenticated;
GRANT ALL ON TABLE posts TO service_role;

-- 4. ARREGLAR CONTADOR DE IDs
-- Evita errores al crear nuevos posts si borraste los anteriores
GRANT USAGE, SELECT ON SEQUENCE posts_id_seq TO anon, authenticated, service_role;

-- 5. URLS AMIGABLES
-- Asegurar que existe la columna slug
ALTER TABLE posts ADD COLUMN IF NOT EXISTS slug text;
```

### Configurar Autenticación (Login)
1. Ve a **Authentication** -> **Providers**. Asegúrate de que **Email** esté habilitado.
2. Ve a **Authentication** -> **Users** y crea un nuevo usuario (este será tu admin).

---

## 2. Configuración de Cloudinary

1. Ve a tu panel de Cloudinary -> **Settings** -> **Upload**.
2. En **Upload presets**, añade uno nuevo.
3. **IMPORTANTE:** En "Signing Mode", selecciona **Unsigned**.
4. En "Upload preset name", escribe: `blog_upload`.

---

## 3. Cómo poner la aplicación en marcha (LOCAL)

Sigue estos pasos para trabajar en tu ordenador:

1.  **Instalar Node.js:** Asegúrate de tenerlo instalado.
2.  **Abrir Terminal:** Abre la carpeta del proyecto en tu terminal o VS Code.
3.  **Instalar Dependencias:**
    ```bash
    npm install
    ```
4.  **Iniciar Servidor:**
    ```bash
    npm run dev
    ```
5.  **Ver:** Abre `http://localhost:3000` en tu navegador.

---

## 4. Cómo desplegar en GitHub Pages (GRATIS)

Para que el mundo vea tu web:

1.  **Crear Repositorio:** Crea un repo en GitHub y sube este código. Para despliegue gratuito, el repo debe ser **público**. Si necesitas mantenerlo privado, ver las instrucciones abajo.

2.  **Configurar GitHub Pages:** Ve a Settings -> Pages, selecciona "Deploy from a branch" como source, luego elige la rama `gh-pages` y carpeta `/(root)`.

---

## 5. Configuración del Asistente de IA (Gemini)

Para que el asistente de IA en el panel de administración funcione, necesitas una clave de API de Google Gemini.

### A. Para Entorno Local

1.  **Crea un archivo `.env`:** En la raíz de tu proyecto, crea un archivo llamado `.env`.
2.  **Añade tu clave de API:** Dentro del archivo `.env`, añade la siguiente línea, reemplazando `TU_API_KEY_DE_GEMINI` con tu clave real:
    ```
    VITE_GEMINI_API_KEY=TU_API_KEY_DE_GEMINI
    ```
3.  **Añade `.env` a `.gitignore`:** Para evitar subir tu clave secreta a GitHub, asegúrate de que tu archivo `.gitignore` contenga la línea:
    ```
    .env
    ```

### B. Para GitHub (Despliegue)

1.  **Ve a tu repositorio en GitHub.**
2.  Haz clic en la pestaña **Settings** (Configuración).
3.  En el menú de la izquierda, ve a **Secrets and variables** > **Actions**.
4.  Haz clic en el botón **New repository secret**.
5.  **Nombre del secreto:** `VITE_GEMINI_API_KEY`
6.  **Valor del secreto:** Pega aquí tu clave de API de Gemini.
7.  Haz clic en **Add secret**.

